{"version":3,"sources":["API.js","HomeAddressForm.js","App.js","index.js"],"names":["API_URL","window","location","hostname","require","config","listHomeAddress","a","fetch","response","json","createHomeAddress","entry","method","headers","process","body","JSON","stringify","HomeAddresForm","onClose","useState","loading","setLoading","error","setError","useForm","register","handleSubmit","onSubmit","getValues","data","document","querySelector","files","undefined","formData","FormData","append","options","res","img","imgUrl","secure_url","image","latitude","longitude","console","log","message","Form","className","Group","controlId","Label","Control","type","min","max","name","ref","required","Text","as","rows","placeholder","File","label","Button","disabled","App","homeAddress","setHomeAddress","showPopup","setShowPopup","addHomeLocation","setAddHomeLocation","width","height","zoom","viewport","setViewport","getAddress","useEffect","mapStyle","mapboxApiAccessToken","onViewportChange","nextViewport","onDblClick","event","lngLat","map","key","_id","onClick","style","version","id","x","y","viewBox","d","absen","closeButton","closeOnClick","dynamicPosition","anchor","Card","Img","variant","src","alt","Body","Title","description","target","href","role","aria-label","HomeAddressForm","ReactDOM","render","getElementById"],"mappings":"8QAAMA,G,MAAuC,cAA7BC,OAAOC,SAASC,SAA2B,wBAA0B,yBACrFC,EAAQ,IAAUC,SAEX,SAAeC,IAAtB,+B,4CAAO,4BAAAC,EAAA,sEACkBC,MAAM,GAAD,OAAIR,EAAJ,iBADvB,cACCS,EADD,yBAEEA,EAASC,QAFX,4C,sBAKA,SAAeC,EAAtB,kC,4CAAO,WAAiCC,GAAjC,eAAAL,EAAA,sEACkBC,MAAM,GAAD,OAAIR,EAAJ,gBAA0B,CACpDa,OAAQ,OACRC,QAAQ,CACN,eAAgB,mBAChB,YAAY,GAAZ,OAXQC,gBAaVC,KAAMC,KAAKC,UAAUN,KAPlB,cACCH,EADD,yBASEA,EAASC,QATX,4C,0CCFPN,EAAQ,IAAUC,SAClB,IAqEec,EAlEU,SAAC,GAAuB,IAAtBjB,EAAqB,EAArBA,SAAUkB,EAAW,EAAXA,QAAW,EACfC,oBAAS,GADM,mBACrCC,EADqC,KAC7BC,EAD6B,OAEnBF,mBAAS,IAFU,mBAErCG,EAFqC,KAE/BC,EAF+B,OAGFC,cAAnCC,EAHqC,EAGrCA,SAASC,EAH4B,EAG5BA,aAEVC,GALsC,EAGfC,UAEf,uCAAE,WAAOC,GAAP,2BAAAxB,EAAA,2DACIyB,SAASC,cAAc,sBAAjCC,EADM,EACNA,WAEUC,IAAbJ,EAAKG,OAAkC,OAAbH,EAAKG,OAA6B,KAAbH,EAAKG,MAH3C,wBAIVX,GAAW,IACLa,EAAW,IAAIC,UACZC,OAAO,OAAQJ,EAAM,IAC9BE,EAASE,OAAO,gBAdAvB,YAeVwB,EAAU,CACd1B,OAAQ,OACRG,KAAMoB,GAVE,SAYQ5B,MAAM,mCAAD,OApBZO,UAoBY,iBAC2CwB,GAbxD,cAYJC,EAZI,iBAeQA,EAAI9B,OAfZ,QAeJ+B,EAfI,OAgBJC,EAASD,EAAIE,WACnBZ,EAAKa,MAAQF,EACbnB,GAAW,GAlBD,wBAoBVQ,EAAKa,MAAQ,GApBH,yBAwBRrB,GAAW,GACXQ,EAAKc,SAAW3C,EAAS2C,SACzBd,EAAKe,UAAY5C,EAAS4C,UA1BlB,UA2BYnC,EAAkBoB,GA3B9B,eA4BRX,IA5BQ,mDA8BR2B,QAAQC,IAAR,MACAvB,EAAS,KAAMwB,SACf1B,GAAW,GAhCH,2DAAF,uDAmClB,OACI,kBAAC2B,EAAA,EAAD,CAAMrB,SAAUD,EAAaC,GAAWsB,UAAU,cACjD3B,EAAO,wBAAI2B,UAAU,SAAS3B,EAAvB,KAAsC,KAC9C,kBAAC0B,EAAA,EAAKE,MAAN,CAAYC,UAAU,aACpB,kBAACH,EAAA,EAAKI,MAAN,cACA,kBAACJ,EAAA,EAAKK,QAAN,CAAcC,KAAK,SAASC,IAAI,IAAIC,IAAI,KAAKC,KAAK,QAAQC,IAAKjC,EAAUkC,UAAQ,IACjF,kBAACX,EAAA,EAAKY,KAAN,CAAWX,UAAU,cAArB,0CAKF,kBAACD,EAAA,EAAKE,MAAN,CAAYC,UAAU,iBACpB,kBAACH,EAAA,EAAKI,MAAN,sBACA,kBAACJ,EAAA,EAAKK,QAAN,CAAcQ,GAAG,WAAWC,KAAM,EAAGC,YAAY,gBAAgBN,KAAK,cAAcC,IAAKjC,KAG3F,kBAACuB,EAAA,EAAKE,MAAN,KACI,kBAACF,EAAA,EAAKgB,KAAN,CAAWP,KAAK,QAAQH,KAAK,OAAOW,MAAM,aAAaP,IAAKjC,KAGhE,kBAACyC,EAAA,EAAD,CAAQZ,KAAK,SAASa,SAAU/C,GAAUA,EAAU,eAAiB,4BCiF1DgD,EAhJH,WAAO,IAAD,EACsBjD,mBAAS,IAD/B,mBACTkD,EADS,KACIC,EADJ,OAEkBnD,mBAAS,IAF3B,mBAEToD,EAFS,KAEEC,EAFF,OAG8BrD,mBAAS,MAHvC,mBAGTsD,EAHS,KAGQC,EAHR,OAIgBvD,mBAAS,CACvCwD,MAAO,QACPC,OAAQ,QACRjC,UAAW,UACXC,UAAW,WACXiC,KAAM,KATQ,mBAITC,EAJS,KAICC,EAJD,KAYVC,EAAU,uCAAG,4BAAA3E,EAAA,sEACSD,IADT,OACXiE,EADW,OAEjBC,EAAeD,GAFE,2CAAH,qDAKhBY,qBAAU,WACRD,MACA,IAWF,OACE,gBAAC,IAAD,iBACMF,EADN,CAEEI,SAAS,0DACTC,qBAAsBtE,oGACtBuE,iBAAkB,SAAAC,GAAY,OAAIN,EAAYM,IAC9CC,WAfuB,SAACC,GAAS,IAAD,cACJA,EAAMC,OADF,GAC3B5C,EAD2B,KAChBD,EADgB,KAElC+B,EAAmB,CACjB/B,WACAC,iBAcEyB,EAAYoB,KAAI,SAAA/E,GAAK,OACnB,gBAAC,WAAD,CAAgBgF,IAAKhF,EAAMiF,KACzB,gBAAC,IAAD,CACEhD,SAAUjC,EAAMiC,SAChBC,UAAWlC,EAAMkC,WAEjB,uBAAKgD,QAAS,kBAAKpB,EAAa,eAC7B9D,EAAMiF,KAAK,MAGZ,uBACI1C,UAAU,gBACV4C,MAAO,CACLjB,OAAO,GAAD,OAAK,EAAIE,EAASD,KAAlB,MACNF,MAAM,GAAD,OAAK,EAAIG,EAASD,KAAlB,OAEPiB,QAAQ,MAAMC,GAAG,UAAUC,EAAE,MAAMC,EAAE,MAAMC,QAAQ,eACnD,yBACE,yBACE,wBAAMC,EAAE,yVAMlB,qBAAGlD,UAAU,UAAUvC,EAAM0F,SAI7B7B,EAAU7D,EAAMiF,KACd,gBAAC,IAAD,CACIhD,SAAUjC,EAAMiC,SAChBC,UAAWlC,EAAMkC,UACjByD,aAAa,EACbC,cAAc,EACdC,iBAAiB,EACjBrF,QAAS,kBAAMsD,EAAa,KAC5BgC,OAAO,OACP,2BACE,gBAACC,EAAA,EAAD,CAAMZ,MAAO,CAAElB,MAAO,UACtB,0BAAQ1B,UAAU,8BAA8BK,KAAK,UAArD,QACC5C,EAAMgC,OAAS,gBAAC+D,EAAA,EAAKC,IAAN,CAAUC,QAAQ,MAAMC,IAAKlG,EAAMgC,MAAOmE,IAAKnG,EAAM0F,QACnE,gBAACK,EAAA,EAAKK,KAAN,KACE,gBAACL,EAAA,EAAKM,MAAN,KAAY,yBAAIrG,EAAM0F,QACtB,gBAACK,EAAA,EAAK7C,KAAN,KACGlD,EAAMsG,aAET,gBAAC9C,EAAA,EAAD,CAAQyC,QAAQ,UAAUM,OAAO,SAASC,KAAM,6BAA6BxG,EAAMiC,SAAS,IAAIjC,EAAMkC,WAAtG,uBAIN,qBAAGK,UAAU,UAAb,8BAAiD,wBAAMkE,KAAK,MAAMC,aAAW,QAA5B,kBAEnD,SAMV3C,EACE,gCACA,gBAAC,IAAD,CACI9B,SAAU8B,EAAgB9B,SAC1BC,UAAW6B,EAAgB7B,WAE3B,2BACE,uBACIK,UAAU,aACV4C,MAAO,CACLjB,OAAO,GAAD,OAAK,EAAIE,EAASD,KAAlB,MACNF,MAAM,GAAD,OAAK,EAAIG,EAASD,KAAlB,OAEPiB,QAAQ,MAAMC,GAAG,UAAUC,EAAE,MAAMC,EAAE,MAAMC,QAAQ,eACnD,yBACE,yBACE,wBAAMC,EAAE,2VAQpB,gBAAC,IAAD,CACUxD,SAAU8B,EAAgB9B,SAC1BC,UAAW6B,EAAgB7B,UAC3ByD,aAAa,EACbC,cAAc,EACdC,iBAAiB,EACjBrF,QAAS,kBAAMwD,EAAmB,OAClC8B,OAAO,OACP,uBAAKvD,UAAU,SACb,gBAACoE,EAAD,CAAiBnG,QAAS,WACxBwD,EAAmB,MACnBM,KACChF,SAAUyE,OAIzB,OC5IZ6C,IAASC,OAAO,kBAAC,EAAD,MAASzF,SAAS0F,eAAe,W","file":"static/js/main.6f3116bb.chunk.js","sourcesContent":["const API_URL = window.location.hostname === 'localhost' ? 'http://localhost:5000' : 'https://travel.now.sh';\r\nrequire('dotenv').config();\r\nconst api_key=process.env.REACT_APP_API_KEY;\r\nexport async function listHomeAddress() {\r\n  const response = await fetch(`${API_URL}/api/address`);\r\n  return response.json();\r\n}\r\n\r\nexport async function createHomeAddress(entry) {\r\n  const response = await fetch(`${API_URL}/api/address`,{\r\n    method: 'POST',\r\n    headers:{\r\n      'content-type': 'application/json',\r\n      'x-api-key': `${api_key}`,\r\n    },\r\n    body: JSON.stringify(entry),\r\n  });\r\n  return response.json();\r\n}","import React, {useState} from 'react';\r\nimport {useForm} from 'react-hook-form';\r\nimport {Form,Button} from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {createHomeAddress} from './API';\r\n\r\nrequire('dotenv').config();\r\nconst cloudinary_id= process.env.REACT_APP_CLOUDINARY_ID;\r\nconst cloudinary_preset = process.env.REACT_APP_CLOUDINARY_PRESET;\r\n\r\n    const HomeAddresForm=({location, onClose})=>{\r\n    const [loading,setLoading] = useState(false);\r\n    const [error,setError] = useState('');\r\n    const {register,handleSubmit,getValues} = useForm();    \r\n    \r\n    const onSubmit= async (data) =>{\r\n      const { files } = document.querySelector('input[type=\"file\"]');\r\n        //check if image input file is filled or not\r\n        if(data.files!==undefined || data.files!==null || data.files!==\"\"){ \r\n          setLoading(true);\r\n          const formData = new FormData();\r\n          formData.append('file', files[0]);\r\n          formData.append('upload_preset', cloudinary_preset);\r\n          const options = {\r\n            method: 'POST',\r\n            body: formData,\r\n          };                 \r\n          const res = await fetch(  \r\n            `https://api.cloudinary.com/v1_1/${cloudinary_id}/image/upload`,options             \r\n          );\r\n          const img = await res.json();\r\n          const imgUrl = img.secure_url;\r\n          data.image = imgUrl;\r\n          setLoading(false);\r\n        } else {\r\n          data.image = \"\";\r\n        }              \r\n        //processing the upload request\r\n        try {\r\n            setLoading(true);\r\n            data.latitude = location.latitude;\r\n            data.longitude = location.longitude;\r\n            const created=await createHomeAddress(data);\r\n            onClose();\r\n        } catch (error) {\r\n            console.log(error);\r\n            setError(error.message);\r\n            setLoading(false);\r\n        }   \r\n    };\r\nreturn(    \r\n    <Form onSubmit={handleSubmit(onSubmit)} className=\"entry-form\">\r\n    {error ?<h3 className=\"error\">{error} </h3> : null}\r\n    <Form.Group controlId=\"formAbsen\">\r\n      <Form.Label>Absen</Form.Label>\r\n      <Form.Control type=\"number\" min=\"0\" max=\"32\" name=\"absen\" ref={register} required />\r\n      <Form.Text className=\"text-muted\">\r\n        Nomor absen kamu dulu waktu di kelas.\r\n      </Form.Text>\r\n    </Form.Group>\r\n  \r\n    <Form.Group controlId=\"formDeskripsi\">\r\n      <Form.Label>Petunjuk Arah</Form.Label>\r\n      <Form.Control as=\"textarea\" rows={3} placeholder=\"petunjuk arah\" name=\"description\" ref={register}/>\r\n    </Form.Group>\r\n\r\n    <Form.Group>\r\n        <Form.File name=\"image\" type=\"file\" label=\"Foto Rumah\" ref={register}/>\r\n    </Form.Group>\r\n\r\n    <Button type=\"submit\" disabled={loading}>{loading ? 'Memproses...' : 'Tambahkan alamat rumah'}\r\n    </Button>\r\n  </Form>\r\n)\r\n};\r\n\r\nexport default HomeAddresForm;","import * as React from 'react';\r\nimport { useState, useEffect } from 'react';\r\nimport ReactMapGL , { Marker, Popup } from 'react-map-gl';\r\nimport { Card, Button } from 'react-bootstrap';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { listHomeAddress } from './API';\r\nimport HomeAddressForm from './HomeAddressForm';\r\nconst App = () => {\r\n  const [homeAddress, setHomeAddress] = useState([]);\r\n  const [showPopup, setShowPopup] = useState({});\r\n  const [addHomeLocation, setAddHomeLocation] = useState(null);\r\n  const [viewport, setViewport] = useState({\r\n    width: '100vw',\r\n    height: '100vh',\r\n    latitude: -7.7915842,\r\n    longitude: 110.339104,\r\n    zoom: 10\r\n  });\r\n  \r\n  const getAddress = async() =>{\r\n    const homeAddress = await listHomeAddress();\r\n    setHomeAddress(homeAddress);\r\n  }\r\n\r\n  useEffect(()=>{\r\n    getAddress();      \r\n  },[]);\r\n\r\n  const showAddMarkerPopup = (event)=>{\r\n    const [longitude, latitude] = event.lngLat;\r\n    setAddHomeLocation({\r\n      latitude,\r\n      longitude\r\n    })\r\n  };\r\n\r\n\r\n  return (\r\n    <ReactMapGL\r\n      {...viewport}\r\n      mapStyle=\"mapbox://styles/bagusamrullah/ckfgrpsh52apl19p8iq4zqhcb\"\r\n      mapboxApiAccessToken={process.env.REACT_APP_MAPBOX_TOKEN}\r\n      onViewportChange={nextViewport => setViewport(nextViewport)}\r\n      onDblClick={showAddMarkerPopup}\r\n      >\r\n      {\r\n        homeAddress.map(entry=>(\r\n          <React.Fragment key={entry._id}>\r\n            <Marker \r\n              latitude={entry.latitude} \r\n              longitude={entry.longitude} \r\n            >\r\n              <div onClick={()=> setShowPopup({\r\n                [entry._id]:true,\r\n              })}\r\n              >              \r\n                <svg\r\n                    className=\"marker yellow\"\r\n                    style={{\r\n                      height: `${2 * viewport.zoom}px`,\r\n                      width: `${2 * viewport.zoom}px`,\r\n                    }}\r\n                    version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\">\r\n                    <g>\r\n                      <g>\r\n                        <path d=\"M256,0C153.755,0,70.573,83.182,70.573,185.426c0,126.888,165.939,313.167,173.004,321.035\r\n                          c6.636,7.391,18.222,7.378,24.846,0c7.065-7.868,173.004-194.147,173.004-321.035C441.425,83.182,358.244,0,256,0z M256,278.719\r\n                          c-51.442,0-93.292-41.851-93.292-93.293S204.559,92.134,256,92.134s93.291,41.851,93.291,93.293S307.441,278.719,256,278.719z\"/>\r\n                      </g>\r\n                    </g>                    \r\n                  </svg>\r\n              <p className=\"number\">{entry.absen}</p>  \r\n              </div>\r\n            </Marker>\r\n            {\r\n              showPopup[entry._id] ? (\r\n                <Popup\r\n                    latitude={entry.latitude}\r\n                    longitude={entry.longitude}\r\n                    closeButton={false}\r\n                    closeOnClick={false}\r\n                    dynamicPosition={true}\r\n                    onClose={() => setShowPopup({})}\r\n                    anchor=\"top\" >\r\n                    <div>                      \r\n                      <Card style={{ width: '18rem' }}>\r\n                      <button className=\"mapboxgl-popup-close-button\" type=\"button\">×</button>\r\n                      {entry.image && <Card.Img variant=\"top\" src={entry.image} alt={entry.absen} />}\r\n                        <Card.Body>\r\n                          <Card.Title><b>{entry.absen}</b></Card.Title>\r\n                          <Card.Text>\r\n                            {entry.description}\r\n                          </Card.Text>\r\n                          <Button variant=\"primary\" target=\"_blank\" href={\"https://maps.google.com?q=\"+entry.latitude+\",\"+entry.longitude}>Open Google Maps</Button>\r\n                        </Card.Body>\r\n                      </Card>\r\n                    </div>\r\n                    <p className=\"credit\">Made by bagus amrullah with<span role=\"img\" aria-label=\"love\">❤️</span></p>\r\n                </Popup>\r\n              ) : null\r\n            }\r\n          </React.Fragment>\r\n        ))\r\n      }\r\n      {\r\n        addHomeLocation ? (\r\n          <>\r\n          <Marker \r\n              latitude={addHomeLocation.latitude} \r\n              longitude={addHomeLocation.longitude} \r\n            >\r\n              <div>\r\n                <svg\r\n                    className=\"marker red\"\r\n                    style={{\r\n                      height: `${3 * viewport.zoom}px`,\r\n                      width: `${3 * viewport.zoom}px`,\r\n                    }}\r\n                    version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\">\r\n                    <g>\r\n                      <g>\r\n                        <path d=\"M256,0C153.755,0,70.573,83.182,70.573,185.426c0,126.888,165.939,313.167,173.004,321.035\r\n                          c6.636,7.391,18.222,7.378,24.846,0c7.065-7.868,173.004-194.147,173.004-321.035C441.425,83.182,358.244,0,256,0z M256,278.719\r\n                          c-51.442,0-93.292-41.851-93.292-93.293S204.559,92.134,256,92.134s93.291,41.851,93.291,93.293S307.441,278.719,256,278.719z\"/>\r\n                      </g>\r\n                    </g>\r\n                  </svg>\r\n              </div>\r\n            </Marker>\r\n            <Popup\r\n                      latitude={addHomeLocation.latitude}\r\n                      longitude={addHomeLocation.longitude}\r\n                      closeButton={true}\r\n                      closeOnClick={false}\r\n                      dynamicPosition={true}\r\n                      onClose={() => setAddHomeLocation(null)}\r\n                      anchor=\"top\" >\r\n                      <div className=\"popup\">\r\n                        <HomeAddressForm onClose={()=>{\r\n                          setAddHomeLocation(null);\r\n                          getAddress();\r\n                        }} location={addHomeLocation}/>\r\n                      </div>\r\n              </Popup>\r\n          </>\r\n        ) : null\r\n      }\r\n    </ReactMapGL>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}